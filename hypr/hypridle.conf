general {
    lock_cmd = hyprlock                     # use hyprlock for screen locking
    before_sleep_cmd = loginctl lock-session # lock before system suspend
    after_sleep_cmd = hyprctl dispatch dpms on # wake display after suspend so you don’t need an extra key press
}

# --- Step 1: Dim screen + turn off keyboard backlight ---
listener {
    timeout = 120                            # after 2 minutes of inactivity
    on-timeout = brightnessctl -s set 30     # dim screen (don’t go fully dark to avoid OLED burn-in)
    on-resume = brightnessctl -r             # restore brightness on activity
}

listener { 
    timeout = 120                            # same 2 minutes of inactivity
    on-timeout = brightnessctl -sd rgb:kbd_backlight set 0 # turn off keyboard backlight (if available)
    on-resume = brightnessctl -rd rgb:kbd_backlight        # restore keyboard backlight
}

# --- Step 2: Lock session ---
listener {
    timeout = 300                            # after 5 minutes of inactivity
    on-timeout = loginctl lock-session       # lock the screen
}

# --- Step 3: Turn off display ---
listener {
    timeout = 600                            # after 10 minutes of inactivity
    on-timeout = hyprctl dispatch dpms off   # turn off display (DPMS)
    on-resume = hyprctl dispatch dpms on && brightnessctl -r # turn display back on and restore brightness
}

# --- Step 4: Suspend system ---
listener {
    timeout = 900                            # after 15 minutes of inactivity
    on-timeout = systemctl suspend           # suspend the laptop
}

# --- Step 5: Hibernate system ---
listener {
    timeout = 1800                            # after 30 minutes of inactivity
    on-timeout = systemctl hibernate           # hibernate the laptop (sleep from disk)
}
